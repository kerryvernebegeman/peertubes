---
# defaults file for peertube
peer_version: 
#v1.0.0-beta.9
peer_version_url: https://api.github.com/repos/chocobozzz/peertube/releases/latest
peer_version_dest: /tmp
peer_src_url: "https://github.com/Chocobozzz/PeerTube/releases/download/{{ peer_version }}/peertube-{{ peer_version }}.zip"

app_domain:
app_https: true


config:
  webserver:
    https: '{% if app_https %}true{% else %}false{% endif %}'
    port: '{% if app_https %}443{% else %}80{% endif %}'
    hostname: '{{ app_domain }}'
  smtp:
    hostname: null
    port: 465 # If you use StartTLS: 587
    username: null
    password: null
    tls: true # If you use StartTLS: false
    disable_starttls: false
    ca_file: null # Used for self signed certificates
    from_address: 'admin@example.com'





app_user: peertube
app_user_password: "{{lookup('password', 'zz.%s.credentials.txt chars=ascii_letters,digits' % '{{ app_user }}' )}}"
app_user_home: /var/www/peertube
app_user_shell: /bin/bash

special_directories:
  - config
  - storage
  - versions
    
directory_version: "{{ app_user_home }}/versions/peertube-{{ peer_version }}"
directory_latest: "{{ app_user_home }}/peertube-latest"
directory_config: "{{ app_user_home }}/config"

yarn_options: "--production --pure-lockfile"

config_dest: "{{ directory_config }}/production.yaml"
nginx_config_dest: "/etc/nginx/sites-available/peertube"
nginx_config_dest_enable: "/etc/nginx/sites-enable/peertube"

peertube_service_src: "{{ directory_latest }}/support/systemd/peertube.service"
peertube_service_name: "peertube"

app_pg_db_prefix: peertube
app_pg_db_suffix: _prod
app_pg_db: "{{ app_pg_db_prefix }}{{ app_pg_db_suffix }}"
app_pg_user: peertube
app_pg_user_password: "{{ lookup('password', '~/%s.credentials.txt chars=ascii_letters,digits' % 'pgsql_user' )}}"

yarn_gpg_url: "https://dl.yarnpkg.com/debian/pubkey.gpg"
yarn_repo_line: "deb https://dl.yarnpkg.com/debian/ stable main" 
yarn_repo_file: "/etc/apt/sources.list.d/yarn.list"


nodejs_url: https://deb.nodesource.com/setup_8.x 
nodejs_url_dest: /tmp
